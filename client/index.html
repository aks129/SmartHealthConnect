<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Health Records Connect - SMART on FHIR</title>
  <style>
    /* Simple CSS reset and basic styling */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      background-color: #f5f5f5;
      color: #333;
      line-height: 1.6;
      padding: 20px;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }
    
    h1 {
      color: #0070f3;
      margin-bottom: 20px;
    }
    
    h2 {
      color: #333;
      margin: 15px 0;
    }
    
    p {
      margin-bottom: 15px;
    }
    
    button {
      background-color: #0070f3;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      margin-top: 10px;
    }
    
    button:hover {
      background-color: #0051a8;
    }
    
    .card {
      border: 1px solid #eaeaea;
      border-radius: 5px;
      padding: 15px;
      margin-bottom: 15px;
      background-color: #fafafa;
    }
    
    .card-title {
      font-weight: 600;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Health Records Connect</h1>
    <p>Your secure gateway to SMART on FHIR healthcare records.</p>
    
    <div class="card">
      <div class="card-title">Connect to your provider</div>
      <p>Securely connect to your healthcare provider to access and manage your medical records.</p>
      <button id="connectBtn">Connect Now</button>
    </div>
    
    <div class="card">
      <div class="card-title">View Patient Summary</div>
      <p>Access your comprehensive medical history, conditions, and care plans in one place.</p>
      <button id="summaryBtn">View Summary</button>
    </div>
    
    <div class="card">
      <div class="card-title">Research Opportunities</div>
      <p>Discover clinical trials and research studies relevant to your health profile.</p>
      <button id="researchBtn">Explore Research</button>
    </div>
  </div>

  <script>
    // Function to redirect to dashboard with a specific provider ID
    function connectToProvider(providerId) {
      // In a real app, this would trigger SMART on FHIR authentication
      // For now, we'll simulate by just redirecting to the dashboard
      window.location.href = `/dashboard.html?provider=${providerId}`;
    }
    
    // Show provider selection modal
    function showProviderModal() {
      // Create modal elements
      const modal = document.createElement('div');
      modal.style.position = 'fixed';
      modal.style.top = '0';
      modal.style.left = '0';
      modal.style.width = '100%';
      modal.style.height = '100%';
      modal.style.backgroundColor = 'rgba(0, 0, 0, 0.5)';
      modal.style.display = 'flex';
      modal.style.justifyContent = 'center';
      modal.style.alignItems = 'center';
      modal.style.zIndex = '1000';
      
      const modalContent = document.createElement('div');
      modalContent.style.backgroundColor = 'white';
      modalContent.style.padding = '20px';
      modalContent.style.borderRadius = '8px';
      modalContent.style.maxWidth = '500px';
      modalContent.style.width = '90%';
      
      const modalHeader = document.createElement('div');
      modalHeader.style.display = 'flex';
      modalHeader.style.justifyContent = 'space-between';
      modalHeader.style.alignItems = 'center';
      modalHeader.style.marginBottom = '20px';
      
      const modalTitle = document.createElement('h2');
      modalTitle.textContent = 'Select Your Healthcare Provider';
      modalTitle.style.margin = '0';
      
      const closeButton = document.createElement('button');
      closeButton.textContent = 'Ã—';
      closeButton.style.background = 'none';
      closeButton.style.border = 'none';
      closeButton.style.fontSize = '24px';
      closeButton.style.cursor = 'pointer';
      closeButton.addEventListener('click', function() {
        document.body.removeChild(modal);
      });
      
      modalHeader.appendChild(modalTitle);
      modalHeader.appendChild(closeButton);
      
      // Provider list
      const providers = [
        { id: 'demo', name: 'Demo Health System', description: 'Access demonstration data without a real provider' },
        { id: 'epic', name: 'Epic MyChart', description: 'Connect to organizations using Epic EHR' },
        { id: 'cerner', name: 'Cerner Patient Portal', description: 'Connect to organizations using Cerner EHR' },
        { id: 'athena', name: 'AthenaHealth Portal', description: 'Connect to clinics using AthenaHealth' },
        { id: 'va', name: 'Veterans Affairs', description: 'For veterans enrolled in VA healthcare' },
        { id: 'medicare', name: 'Medicare Blue Button', description: 'Access your Medicare claims and records' }
      ];
      
      const providersList = document.createElement('div');
      
      providers.forEach(provider => {
        const providerItem = document.createElement('div');
        providerItem.style.padding = '15px';
        providerItem.style.borderBottom = '1px solid #eaeaea';
        providerItem.style.cursor = 'pointer';
        providerItem.style.transition = 'background-color 0.2s';
        
        providerItem.addEventListener('mouseover', function() {
          providerItem.style.backgroundColor = '#f5f5f5';
        });
        
        providerItem.addEventListener('mouseout', function() {
          providerItem.style.backgroundColor = 'white';
        });
        
        providerItem.addEventListener('click', function() {
          document.body.removeChild(modal);
          connectToProvider(provider.id);
        });
        
        const providerName = document.createElement('h3');
        providerName.textContent = provider.name;
        providerName.style.margin = '0 0 5px 0';
        
        const providerDesc = document.createElement('p');
        providerDesc.textContent = provider.description;
        providerDesc.style.margin = '0';
        providerDesc.style.fontSize = '14px';
        providerDesc.style.color = '#666';
        
        providerItem.appendChild(providerName);
        providerItem.appendChild(providerDesc);
        providersList.appendChild(providerItem);
      });
      
      const modalFooter = document.createElement('div');
      modalFooter.style.marginTop = '20px';
      modalFooter.style.textAlign = 'center';
      
      const privacyText = document.createElement('p');
      privacyText.textContent = 'Your data will be securely transmitted according to HIPAA standards';
      privacyText.style.fontSize = '14px';
      privacyText.style.color = '#666';
      
      modalFooter.appendChild(privacyText);
      
      modalContent.appendChild(modalHeader);
      modalContent.appendChild(providersList);
      modalContent.appendChild(modalFooter);
      modal.appendChild(modalContent);
      
      document.body.appendChild(modal);
    }
    
    // Handle button clicks
    document.getElementById('connectBtn').addEventListener('click', function() {
      showProviderModal();
    });
    
    document.getElementById('summaryBtn').addEventListener('click', function() {
      // For now, use the demo provider
      connectToProvider('demo');
    });
    
    document.getElementById('researchBtn').addEventListener('click', function() {
      connectToProvider('demo');
      // After connecting, navigate directly to the research tab
      localStorage.setItem('initialTab', 'research');
    });
  </script>
</body>
</html>
